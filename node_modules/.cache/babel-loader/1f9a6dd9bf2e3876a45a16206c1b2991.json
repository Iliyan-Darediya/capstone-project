{"ast":null,"code":"var _jsxFileName = \"/Users/iliyandarediya/Documents/GitHub/Capstone-project/src/Context.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { db } from \"./firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Context = /*#__PURE__*/React.createContext();\n\nfunction ContextProvider({\n  children\n}) {\n  _s();\n\n  const [currentId, setCurrentId] = useState(3);\n  const [name, setName] = useState(\"Emily\");\n  const [obj, setObj] = useState({});\n  const [result, setResult] = useState([]);\n  useEffect(() => {\n    //------THE MAIN METHOD UNCOMMENT IT BEFORE DEPLOYMENT-----------//\n    db.collection(\"User\").onSnapshot(snapshot => {\n      let changes = snapshot.docChanges();\n      changes.forEach(item => {\n        //console.log(\"From context \"+item.doc.data())\n        //console.log(\"From context \"+item.doc.id)\n        if (parseInt(item.doc.id) >= 0) {\n          setCurrentId(item.doc.id);\n        }\n\n        if (item.doc.id == currentId) {\n          setObj(item.doc.data());\n          setCurrentId(item.doc.id);\n        }\n      });\n    });\n    /* db.collection(\"User\").onSnapshot(snapshot=>{\n        let changes = snapshot.docChanges()\n        changes.forEach(item=>{\n            \n            //console.log(item.doc.id)\n            if(parseInt(item.doc.id)>=0){\n                setCurrentId(item.doc.id)\n            } \n        })\n    }) */\n  }, []); //console.log(\"current id from context \"+currentId)\n\n  const requestNewId = name => {\n    setName(name);\n    setCurrentId(prevId => {\n      let currentId = parseInt(prevId);\n      currentId++;\n      return currentId.toString();\n    });\n    db.collection(\"User\").doc(currentId).set({\n      [name]: [\"KevinAddedItem0\"]\n    }, {\n      merge: true\n    });\n  };\n\n  const handleDelete = id => {\n    db.collection(\"User\").doc(id).delete();\n    console.log(\"handleDelete button Clicked\");\n  };\n\n  const handleAdd = name => {\n    setName(name);\n    db.collection(\"User\").doc(currentId).set({\n      [name]: [\"KevinAddedItem0\"]\n    }, {\n      merge: true\n    });\n  };\n\n  const addMovie = movieName => {\n    db.collection(\"User\").doc(currentId).update({\n      [name]: window.firebase.firestore.FieldValue.arrayUnion(movieName)\n    });\n  };\n\n  const checkMatches = id => {\n    /* var docRef = db.collection(\"User\").doc(currentId.toString());\n    docRef.get().then((doc) => {\n        if (doc.exists) {\n            setObj(doc.data());\n        } else {\n            // doc.data() will be undefined in this case\n            console.log(\"No such document! \" + currentId);\n        }\n    }).catch((error) => {\n        console.log(\"Error getting document:\", error);\n    }); */\n    //console.log(obj)\n\n    /* db.collection(\"User\").onSnapshot(snapshot=>{\n        let changes = snapshot.docChanges()\n        changes.forEach(item=>{\n            if(item.doc.id==id){\n                setObj(item.doc.data())\n                setCurrentId(item.doc.id)\n            }\n            //console.log(item.doc.id)\n            if(parseInt(item.doc.id)>=0){\n                setCurrentId(item.doc.id)\n            } \n        })\n    }) */\n    let bunch = [];\n    /* for (const [key, value] of Object.entries(obj)) {\n        console.log(key)\n        //console.log(`${value}`);\n    } */\n\n    let findDuplicates = arr => arr.filter((item, index) => arr.indexOf(item) !== index); //console.log(findDuplicates(bunch))\n\n\n    setResult(findDuplicates(bunch));\n    console.log(obj);\n    console.log(\"current Id \" + currentId); //console.log(\"result is \"+result)\n  };\n\n  return /*#__PURE__*/_jsxDEV(Context.Provider, {\n    value: {\n      setName,\n      name,\n      setCurrentId,\n      currentId,\n      handleDelete,\n      handleAdd,\n      addMovie,\n      requestNewId,\n      checkMatches,\n      result,\n      obj\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ContextProvider, \"b0cWifN3y1w1OQ2+EKwLLvk6BB4=\");\n\n_c = ContextProvider;\nexport { ContextProvider, Context };\n\nvar _c;\n\n$RefreshReg$(_c, \"ContextProvider\");","map":{"version":3,"sources":["/Users/iliyandarediya/Documents/GitHub/Capstone-project/src/Context.js"],"names":["React","useState","useEffect","db","Context","createContext","ContextProvider","children","currentId","setCurrentId","name","setName","obj","setObj","result","setResult","collection","onSnapshot","snapshot","changes","docChanges","forEach","item","parseInt","doc","id","data","requestNewId","prevId","toString","set","merge","handleDelete","delete","console","log","handleAdd","addMovie","movieName","update","window","firebase","firestore","FieldValue","arrayUnion","checkMatches","bunch","findDuplicates","arr","filter","index","indexOf"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from \"react\"\nimport {db} from \"./firebase\"\n\nconst Context = React.createContext()\n\nfunction ContextProvider({children}) {\n\n    const [currentId,setCurrentId] = useState(3)\n    const [name,setName] = useState(\"Emily\")\n    const [obj,setObj] = useState({})\n    const [result,setResult] = useState([])\n\n    useEffect(()=>{\n        //------THE MAIN METHOD UNCOMMENT IT BEFORE DEPLOYMENT-----------//\n        db.collection(\"User\").onSnapshot(snapshot=>{\n            let changes = snapshot.docChanges()\n            changes.forEach(item=>{\n                //console.log(\"From context \"+item.doc.data())\n                //console.log(\"From context \"+item.doc.id)\n                if(parseInt(item.doc.id)>=0){\n                    setCurrentId(item.doc.id)\n                }\n                if(item.doc.id==currentId){\n                    setObj(item.doc.data())\n                    setCurrentId(item.doc.id)\n                }\n            })\n        }) \n        /* db.collection(\"User\").onSnapshot(snapshot=>{\n            let changes = snapshot.docChanges()\n            changes.forEach(item=>{\n                \n                //console.log(item.doc.id)\n                if(parseInt(item.doc.id)>=0){\n                    setCurrentId(item.doc.id)\n                } \n            })\n        }) */\n    },[])\n    \n    //console.log(\"current id from context \"+currentId)\n    \n    const requestNewId = name =>{\n        setName(name)\n        setCurrentId(prevId=>{\n            let currentId = parseInt(prevId)\n            currentId++\n            return(currentId.toString())\n        })\n        db.collection(\"User\").doc(currentId).set({\n            [name] : [\"KevinAddedItem0\"]\n        },{merge:true})\n    }\n\n    const handleDelete = id =>{\n        db.collection(\"User\").doc(id).delete()\n        console.log(\"handleDelete button Clicked\")\n    }\n\n    const handleAdd = name =>{\n        setName(name)\n        db.collection(\"User\").doc(currentId).set({\n            [name] : [\"KevinAddedItem0\"]\n        },{merge:true})\n    }\n\n    const addMovie=(movieName)=>{\n        db.collection(\"User\").doc(currentId).update({\n            [name]:window.firebase.firestore.FieldValue.arrayUnion(movieName)\n        })\n    }\n\n    const checkMatches=(id)=>{\n        \n        /* var docRef = db.collection(\"User\").doc(currentId.toString());\n        docRef.get().then((doc) => {\n            if (doc.exists) {\n                setObj(doc.data());\n            } else {\n                // doc.data() will be undefined in this case\n                console.log(\"No such document! \" + currentId);\n            }\n        }).catch((error) => {\n            console.log(\"Error getting document:\", error);\n        }); */\n         \n        //console.log(obj)\n        \n        /* db.collection(\"User\").onSnapshot(snapshot=>{\n            let changes = snapshot.docChanges()\n            changes.forEach(item=>{\n                if(item.doc.id==id){\n                    setObj(item.doc.data())\n                    setCurrentId(item.doc.id)\n                }\n                //console.log(item.doc.id)\n                if(parseInt(item.doc.id)>=0){\n                    setCurrentId(item.doc.id)\n                } \n            })\n        }) */\n    \n        let bunch = []\n        /* for (const [key, value] of Object.entries(obj)) {\n            console.log(key)\n            //console.log(`${value}`);\n        } */\n        let findDuplicates = arr => arr.filter((item, index) => arr.indexOf(item) !== index)  \n        //console.log(findDuplicates(bunch))\n        setResult(findDuplicates(bunch)); \n        console.log(obj)\n        console.log(\"current Id \" + currentId)\n        //console.log(\"result is \"+result)\n    }\n\n    return (\n        <Context.Provider value={\n            {\n                setName,\n                name,\n                setCurrentId ,\n                currentId,\n                handleDelete,\n                handleAdd,\n                addMovie,\n                requestNewId,\n                checkMatches,\n                result,\n                obj\n            }\n        }>\n            {children}\n        </Context.Provider>\n    )\n}\n\nexport {ContextProvider, Context}"]},"metadata":{},"sourceType":"module"}